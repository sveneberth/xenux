CKEDITOR.dialog.add("simple-image-browser-dialog",function(e){return{title:"Simple Image Browser",minWidth:800,minHeight:400,maxWidth:800,maxHeight:400,contents:[{id:"tab-step1",label:"Browse for images",elements:[{type:"html",align:"left",id:"titleid",style:"font-size: 20px; font-weight: bold;",html:"Browse for pictures"},{type:"html",align:"left",id:"msg",style:"",html:'<div id="imageBrowser"></div>'}]},{id:"tab-step2",label:"About this plugin",elements:[{type:"html",align:"left",id:"framepreviewtitleid",style:"font-size: 20px; font-weight: bold;",html:"About this author"},{type:"html",align:"left",id:"descriptionid",style:"position:relative;width:800px;",html:'EpicSoftworks released this plugin for free under the MIT licence.<br />You are free to use this for personal, educational or commercial use.<br /><br />Free as in, the freedom to use.<br /><br /><a href="http://epicsoftworks.nl/" target="_blank">Visit my website >></a>'}]}]}});CKEDITOR.plugins.add("simple-image-browser",{init:function(e){if(typeof CKEDITOR.config.simpleImageBrowserListType==="undefined"){CKEDITOR.config.simpleImageBrowserListType="thumbnails"}e.on("dialogShow",function(e){var t;t=e.data;if(t.getName()==="simple-image-browser-dialog"){$.get(CKEDITOR.config.simpleImageBrowserURL,function(e){console.log(e);var t="";$.each(e,function(e,n){if(CKEDITOR.config.simpleImageBrowserListType==="thumbnails"){t=t+"<div onclick=\"CKEDITOR.tools.simpleimagebrowserinsertpicture('"+n.url+"');\" style=\"position:relative;width:75px;height:75px;margin:5px;background-image:url('"+n.url+"&size=75');background-repeat:no-repeat;background-size:125%;background-position:center center;float:left;\"></div>"}else{t="link"}});return $("#imageBrowser").html(t)})}});e.addCommand("simple-image-browser-start",new CKEDITOR.dialogCommand("simple-image-browser-dialog"));CKEDITOR.tools.simpleimagebrowserinsertpicture=function(t){var n,r;console.log(t);e=CKEDITOR.currentInstance;n=CKEDITOR.dialog.getCurrent();r='<img class="cloud-image" src="'+t+'&size=200" data-src="'+t+'" alt="'+t+'" />';e.config.allowedContent=true;e.insertHtml(r.trim());n.hide()};e.ui.addButton("Simple Image Browser",{label:"Simple Image Browser ",command:"simple-image-browser-start",icon:this.path+"images/icon.png"})}})